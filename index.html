<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åˆ†äº«é¡µé¢</title>
    <script src="https://fe-static.xhscdn.com/biz-static/goten/xhs-1.0.1.js"></script> <!-- å¼•å…¥å°çº¢ä¹¦ JS API -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.4.2/sha256.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .section {
            margin-bottom: 30px;
        }
        h2 {
            margin-bottom: 10px;
        }
        button {
            margin-right: 10px;
            padding: 10px 20px;
            color: #fff;
            background-color: #FF2442; /* è®¾ç½®æŒ‰é’®ä¸ºçº¢è‰² */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        #shareImage {
            width: 200px;
            height: auto;
            display: block;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <!-- åˆ†äº«æ ‡é¢˜ -->
    <div class="section">
        <h2>åˆ†äº«çš„æ ‡é¢˜</h2>
        <p id="titleText">éº»è¾£è¯±äººçš„ç«é”…ç››å®´</p>
        <button onclick="copyText('titleText')">å¤åˆ¶æ ‡é¢˜</button>
    </div>

    <!-- åˆ†äº«å†…å®¹ -->
    <div class="section">
        <h2>åˆ†äº«çš„å†…å®¹</h2>
        <p id="contentText">ğŸ”¥ ç«é”…æ§ä»¬ï¼Œä½ ä»¬çš„ç¦éŸ³æ¥å•¦ï¼
è¿‘åœ¨ä¸‰é‡Œå±¯é™„è¿‘å‘ç°äº†ä¸€å®¶è¶…çº§æ£’çš„ç«é”…åº—ï¼Œç®€ç›´è®©æˆ‘æµè¿å¿˜è¿”ï¼è¿™å®¶åº—ä¸ä»…ä½ç½®ä¾¿åˆ©ï¼Œè€Œä¸”ç¯å¢ƒè¶…çº§æ¸©é¦¨ï¼Œä¸€è¿›é—¨å°±è¢«æµ“éƒçš„é¦™æ°”ç»™å¸å¼•ä½äº†ã€‚è¿™æ¬¡å»ä¸»è¦æ˜¯ä¸ºäº†å°è¯•ä»–ä»¬çš„ç‰¹è‰²é”…åº•ï¼Œåº—é‡Œçš„æ±¤åº•é€‰æ‹©çœŸçš„å¤ªä¸°å¯Œäº†ï¼Œä»ç»å…¸çš„ä¹å®«æ ¼åˆ°åˆ›æ–°çš„èŒè‡æ±¤åº•ï¼Œåº”æœ‰å°½æœ‰ï¼
æˆ‘æœ€ç»ˆé€‰æ‹©äº†ä»Šå¹´è¶…ç«çš„ç•ªèŒ„æ¸…æ±¤æ­é…éº»è¾£é”…åº•ï¼Œæ—¢èƒ½äº«å—éº»è¾£çš„åˆºæ¿€ï¼Œåˆèƒ½å“å°åˆ°æ¸…ç”œçš„å£æ„Ÿï¼Œç®€ç›´æ˜¯ç»é…ã€‚è®©äººæƒŠå–œçš„æ˜¯ï¼Œä»–ä»¬çš„é£Ÿææ–°é²œåº¦çœŸçš„æ²¡å¾—è¯´ï¼ä¸ä»…ç§ç±»ä¸°å¯Œï¼ŒæœåŠ¡å‘˜è¿˜ç‰¹åˆ«çƒ­æƒ…åœ°æ¨èå½“å­£é£Ÿæï¼Œç¡®ä¿æ¯ä¸€é“èœå“éƒ½èƒ½æ»¡è¶³é£Ÿå®¢çš„å‘³è•¾ã€‚
æ•´ä¸ªç”¨é¤è¿‡ç¨‹éå¸¸äº«å—ï¼Œæ„Ÿè§‰æ—¶é—´éƒ½è¿‡å¾—ç‰¹åˆ«å¿«ã€‚æœ€åçš„ä½“éªŒæ›´æ˜¯è®©æˆ‘æ»¡æ„å¾—ä¸å¾—äº†ï¼Œæœ‹å‹ä»¬éƒ½è¯´è¿™å®¶ç«é”…å¤ªå€¼äº†ï¼å¦‚æœä½ ä¹Ÿæ˜¯ç«é”…çˆ±å¥½è€…ï¼Œå¼ºçƒˆæ¨èä½ æ¥è¿™é‡Œæ‰“å¡ï¼Œä¿è¯è®©ä½ æ¬²ç½¢ä¸èƒ½ï¼ä¸‹æ¬¡æˆ‘è¿˜æƒ³å°è¯•å…¶ä»–ç‰¹è‰²é”…åº•ï¼Œå·²ç»è¿«ä¸åŠå¾…æƒ³è¦å†æ¬¡å…‰é¡¾äº†ï¼
#ç«é”…æ§å¿…å» #ä¸‰é‡Œå±¯ç¾é£Ÿ #éº»è¾£ç«é”… #ç¾é£Ÿä½“éªŒ #ç‰¹è‰²é”…åº• #æ–°é²œé£Ÿæ #ç«é”…å¤©å ‚ #ç¾é£Ÿçˆ±å¥½è€…çš„ç¦éŸ³ #ä¹å®«æ ¼ç«é”… #èˆ’é€‚ç”¨é¤ç¯å¢ƒ #ä¸ªæ€§åŒ–æ¨è #ç«é”…æ‰“å¡åœ°</p>
        <button onclick="copyText('contentText')">å¤åˆ¶å†…å®¹</button>
    </div>

    <!-- åˆ†äº«å›¾ç‰‡ -->
    <div class="section">
        <h2>åˆ†äº«çš„å›¾ç‰‡</h2>
        <img id="shareImage" src="Test.jpg" alt="åˆ†äº«å›¾ç‰‡">
        <button onclick="saveImage()">ä¿å­˜å›¾ç‰‡</button>
    </div>

    <!-- åˆ†äº«åˆ°å°çº¢ä¹¦æŒ‰é’® -->
    <div class="section">
        <button id="shareButton">åˆ†äº«åˆ°å°çº¢ä¹¦</button>
    </div>

    <script>
        // å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
        function copyText(elementId) {
            var text = document.getElementById(elementId).innerText;
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(function() {
                    alert('å¤åˆ¶æˆåŠŸï¼');
                }, function(err) {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚');
                });
            } else {
                var textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                document.body.appendChild(textarea);
                textarea.focus();
                textarea.select();
                try {
                    document.execCommand('copy');
                    alert('å¤åˆ¶æˆåŠŸï¼');
                } catch (err) {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚');
                }
                document.body.removeChild(textarea);
            }
        }

        // ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ
        function saveImage() {
            var image = document.getElementById('shareImage');
            var link = document.createElement('a');
            link.href = image.src;
            link.download = 'åˆ†äº«å›¾ç‰‡.jpg';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // åˆ†äº«åˆ°å°çº¢ä¹¦
        // Function to get the current timestamp in milliseconds
        function getCurrentTimestamp() {
            return Date.now();
        }

        // Function to generate a random nonce
        function generateNonce(length) {
            var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var nonce = '';
            for (var i = 0; i < length; i++) {
                nonce += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return nonce;
        }

        // Function to build the signature
        function buildSignature(appKey, nonce, timeStamp, appSecret) {
            var params = {
                'appKey': appKey,
                'nonce': nonce,
                'timeStamp': timeStamp.toString()
            };
            return generateSignature(appSecret, params);
        }

        // Function to generate the signature
        function generateSignature(secretKey, params) {
            // Step 1: Sort parameters by key
            var sortedKeys = Object.keys(params).sort();
            // Step 2: Concatenate sorted parameters into a string
            var paramsString = sortedKeys.map(function(key) {
                return key + '=' + params[key];
            }).join('&');
            // Step 3: Append the secret key to the parameter string
            paramsString += secretKey;
            // Step 4: Calculate the SHA-256 hash of the resulting string
            var shaObj = new jsSHA('SHA-256', 'TEXT');
            shaObj.update(paramsString);
            var signature = shaObj.getHash('HEX');
            return signature;
        }

        // åˆ†äº«åˆ°å°çº¢ä¹¦
        document.getElementById('shareButton').addEventListener('click', function() {
            console.log('åˆ†äº«æŒ‰é’®è¢«ç‚¹å‡»');

            var title = document.getElementById('titleText').innerText;
            var content = document.getElementById('contentText').innerText;
            var imageSrc = document.getElementById('shareImage').src;
            
            // æ„å»ºå°çº¢ä¹¦çš„ URL Scheme
            var xhsUrlScheme = 'xhsdiscover://create_post';
            console.log('å³å°†å”¤èµ·å°çº¢ä¹¦Appï¼ŒURL Schemeï¼š', xhsUrlScheme);
            // å”¤èµ·å°çº¢ä¹¦App
            window.location.href = xhsUrlScheme;

            });

    </script>

</body>
</html>
